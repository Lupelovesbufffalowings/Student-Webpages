<!DOCTYPE html>
<html>
  <head>
    <title>Furina Turnbased Energy: coded by Kierian Aren Bautista</title>
    <link href='https://fonts.googleapis.com/css?family=Comfortaa' rel='stylesheet'>
    <style>
      /* Style for the user bar */
      
      body {
    background-image: url('https://i.pinimg.com/736x/74/b4/95/74b4950d6db2186003b7bc9444926f41.jpg');
    background-size: cover; /* Ensure the image covers the entire screen */
    background-position: center center; /* Center the image */
    background-attachment: fixed; /* Keep the background fixed during scrolling */
    background-repeat: no-repeat; /* Prevent the image from repeating */
}

      .stat {
            margin-bottom: 10px;
        }
        .stat input {
            width: 50px;
            margin-left: 10px;
        }
        #totalPoints {
            font-weight: bold;
        }
        #error {
            color: red;
            font-weight: bold;
        }
      
 #user-bar {
        background-color: #3b4cca; /* Deep Fontaine Blue */
        position: fixed;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        padding: 12px;
        border-radius: 12px;
        display: flex;
        gap: 12px;
        box-shadow: 0 4px 12px rgba(50, 100, 255, 0.4);
        border: 4px solid #ffdc73; /* Light cyan outline */
      }

      /* Style for the buttons */
      #user-bar button {
        padding: 12px 24px;
        font-family: "Comfortaa", cursive;
        font-size: 22px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background-color: #5578e5; /* Royal Blue */
        color: white;
        transition: all 0.3s ease-in-out;
        box-shadow: 0 2px 6px rgba(255, 255, 255, 0.2);
      }

      /* Hover effect for buttons */
      #fight:hover {
        background-color: #8b1e1e; /* Dark Red */
      }

      #item:hover {
        background-color: #f8c8dc; /* Pastel Pink */
      }

      /* Style for the health bar */
      #health-bar {
        background: linear-gradient(90deg, #3b4cca, #a8d8ff); /* Blue gradient */
        position: fixed;
        bottom:250px;
        padding: 12px;
        border-radius: 12px;
        display: flex;
        gap: 10px;
        box-shadow: 0 4px 12px rgba(50, 100, 255, 0.4);
        color: white;
        font-size: 22px;
        font-weight: bold;
      }

      /* Style for the fight menu */
      #fightMenu {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(59, 76, 202, 0.9); /* Semi-transparent blue */
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 4px 12px #ffdc73;
        display: none;
        flex-direction: column;
        gap: 12px;
        font-family: "Comfortaa", cursive;
        border: 2px solid #a8d8ff;
        border: 4px solid #ffdc73;
      }

      /* Style for fight menu buttons */
      #fightMenu button {
        padding: 12px 24px;
        font-size: 22px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background-color: #5c7df6;
        color: white;
        transition: all 0.3s ease-in-out;
        font-family: "Comfortaa", cursive;
        border: 3px solid #ffdc73;
      }

      #fightMenu button:hover {
        background-color: #4460d7; /* Darker blue */
      }

      /* Center the enemy and HP bar */
      #ENEMY {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: absolute;
        top: 70%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      
        #slash-effect {
            position: absolute;
            top: 50%; /* Center vertically */
            left: 50%; /* Center horizontally */
            transform: translate(-50%, -50%); /* Center the GIF */
            width: 500px; /* Adjust size as needed */
            height: 500px; /* Adjust size as needed */
            pointer-events: none; /* Ensure the GIF doesn't block clicks */
            z-index: 10; /* Ensure it appears above other elements */
        }

      /* Enemy styling */
      #enemy-test {
        background-color: transparent; /* Deep navy gradient */
        width: 600px;
        height: 600px;
        border-radius: 50%;
        font-family: "IMPACT", serif;
        font-size: 55px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        transition: all 0.4s ease;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      /* Add a water-like ripple effect */
      #enemy-test:hover {
        box-shadow: 0 0 20px rgba(168, 216, 255, 0.7);
        transform: scale(1.05);
      }
      
      
     


      /* Position the enemy HP bar above the enemy */
      #enemy-health-bar {
        background: linear-gradient(90deg, #3b4cca, #a8d8ff);
        padding: 12px;
        border-radius: 12px;
        display: flex;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(50, 100, 255, 0.4);
        color: white;
        font-size: 22px;
        width: 140px;
        text-align: center;
        margin-bottom: 10px;
        font-weight: bold;
      }

      
       .tooltip {
       position: absolute;
        background-color: rgba(0, 0, 0, 0.8);
        color: white;
        border-radius: 8px; /* Rounded corners */
        padding: 16px 20px; /* More padding for larger tooltips */
        visibility: hidden;
        opacity: 0;
        transition: opacity 0.3s;
        font-size: 16px; /* Increased font size */
        z-index: 1000;
        max-width: 250px; /* Larger max width */
        text-align: left;
        width: auto;
        top: 0;
        left: 100%;
        margin-left: 15px; /* Space between button and tooltip */
        transform: translateX(15px);
      }

      /* Show the tooltip when hovering over buttons */
      #fightMenu button:hover + .tooltip,
      #fightMenu button:focus + .tooltip {
        visibility: visible;
        opacity: 1;
      }
      
       #avatar {
        position: fixed;
        bottom: 10px;
        left: 100px;
        width: 250px;
        height: 250px;
        border-radius: 50%;
        border: 15px solid gold; /* Golden frame */
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(255, 215, 0, 0.6); /* Glow effect */
      }

      #avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      
       #itemMenu {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(59, 76, 202, 0.9); /* Semi-transparent blue */
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 4px 12px #ffdc73;
        display: none;
        flex-direction: column;
        gap: 12px;
        font-family: "Comfortaa", cursive;
        border: 2px solid #a8d8ff;
        border: 4px solid #ffdc73;
      }
      
      
       #itemMenu button {
        padding: 12px 24px;
        font-size: 22px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background-color: #5c7df6;
        color: white;
        transition: all 0.3s ease-in-out;
        font-family: "Comfortaa", cursive;
        border: 3px solid #ffdc73;
      }
      
      
      .submenu {
    display: none; /* Hidden by default */
   position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(59, 76, 202, 0.9); /* Semi-transparent blue */
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 4px 12px #ffdc73;
        display: none;
        flex-direction: column;
        gap: 12px;
        font-family: "Comfortaa", cursive;
        border: 2px solid #a8d8ff;
        border: 4px solid #ffdc73;
        
        
        
        
}

.submenu button {
    display: block;
    margin: 5px 0;
   padding: 12px 24px;
        font-size: 22px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background-color: #5c7df6;
        color: white;
        transition: all 0.3s ease-in-out;
        font-family: "Comfortaa", cursive;
        border: 3px solid #ffdc73;
}
      
   #game-messages {
    position: fixed;
    bottom: 2vh;
    right: 2vw;
    width: 30vw;  /* Scales with window width */
    height: 30vh; /* Scales with window height */
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 1vw;
    border-radius: 0.5vw;
    overflow-y: auto;
    font-family: Arial, sans-serif;
    font-size: 2vh; /* Scales text size with height */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    z-index: 1000;
}

#message-log {
    height: 100%;
    overflow-y: auto;
}

#message-log p {
    margin: 5px 0;
}
      
      /* Flashing red effect */
.flash-red {
    animation: flash-red 0.5s ease-out;
}

@keyframes flash-red {
    0% {
        background-color: red;
    }
    50% {
        background-color: initial; /* Reverts to original color */
    }
    100% {
        background-color: red;
    }
}
      
        #mana-bar {
        background: linear-gradient(90deg, #ffdc73, #ffae00); /* Yellow-orange gradient */
        position: fixed;
        bottom: 145px; /* Place above the user bar */
        left: 50%;
        width:200px;
        height:15px;
        transform: translateX(-50%);
        padding: 12px;
        border-radius: 12px;
        display: flex;
        gap: 10px;
        box-shadow: 0 4px 12px rgba(255, 165, 0, 0.6);
        color: white;
        font-size: 22px;
        font-weight: bold;
        font-family: "Comfortaa", cursive;
      }
      
      
      #energy-bar {
        background: linear-gradient(90deg, #ffdc73, #ffae00); /* Yellow-orange gradient */
        position: fixed;
        bottom: 100px; /* Place above the user bar */
       left: 50%;
        width:200px;
        height:15px;
        transform: translateX(-50%);
        padding: 12px;
        border-radius: 12px;
        display: flex;
        gap: 10px;
        box-shadow: 0 4px 12px rgba(255, 165, 0, 0.6);
        color: white;
        font-size: 22px;
        font-weight: bold;
        font-family: "Comfortaa", cursive;
      }
      
      
    
 /* Adventurer's Handbook button */
      #handbook-button {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 24px;
        font-family: "Comfortaa", cursive;
        font-size: 22px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background-color: #5578e5; /* Royal Blue */
        color: white;
        transition: all 0.3s ease-in-out;
        box-shadow: 0 2px 6px rgba(255, 255, 255, 0.2);
      }

      #handbook-button:hover {
        background-color: #4460d7; /* Darker blue */
      }

      /* Adventurer's Handbook menu */
      #handbook-menu {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(59, 76, 202, 0.9); /* Semi-transparent blue */
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 4px 12px #ffdc73;
        display: none;
        flex-direction: column;
        gap: 12px;
        font-family: "Comfortaa", cursive;
        border: 2px solid #a8d8ff;
        border: 4px solid #ffdc73;
      }

      #handbook-menu button {
        padding: 12px 24px;
        font-size: 22px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background-color: #5c7df6;
        color: white;
        transition: all 0.3s ease-in-out;
        font-family: "Comfortaa", cursive;
        border: 3px solid #ffdc73;
      }

      #handbook-menu button:hover {
        background-color: #4460d7; /* Darker blue */
      }

      /* Individual pages for spells and items */
      .handbook-page {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #FFFFFF; 
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 4px 12px #ffdc73;
        font-family: "Comfortaa", cursive;
        font-size:25px;
        border: 10px solid #964B00;
        border: 10px solid #964B00;
        width: 80%;
         max-width: 600px;
    max-height: 80vh; /* Limit the height to 80% of the viewport height */
    overflow-y: auto; 
      }

      .handbook-page h2 {
        font-size: 24px;
        margin-bottom: 12px;
      }

      .handbook-page p {
        font-size: 18px;
        line-height: 1.5;
      }

      .handbook-page button {
        padding: 12px 24px;
        font-size: 18px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background-color: #5c7df6;
        color: white;
        transition: all 0.3s ease-in-out;
        font-family: "Comfortaa", cursive;
        border: 3px solid #ffdc73;
      }

      .handbook-page button:hover {
        background-color: #4460d7; /* Darker blue */
      }
      

      #statstuff {
    font-family: "Comfortaa", cursive;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.8); /* Semi-transparent white background */
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    color: black; /* Text color for contrast */
    max-width: 600px;
    width: 100%;
}

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        p {
            font-size: 1.2em;
            line-height: 1.6;
        }

        .gold-text {
            color: gold;
            font-weight: bold;
        }
      
      
      
      .death-screen {
    display: none; /* Hidden by default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9); /* Dark semi-transparent background */
    z-index: 1000; /* Ensure it's on top of everything */
    justify-content: center;
    align-items: center;
    text-align: center;
}

/* Death content container */
.death-content {
    animation: fadeIn 2s ease-in-out; /* Fade-in animation */
}

/* "You Died" title */
.death-title {
    font-size: 6rem;
    font-weight: bold;
    color: #8b0000; /* Dark red color */
    text-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000, 0 0 30px #ff0000; /* Glowing effect */
    margin: 0;
    padding: 0;
    animation: pulse 2s infinite; /* Pulsating animation */
}

/* Play Again button */
.play-again-button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 1.5rem;
    font-weight: bold;
    color: #fff;
    background-color: #8b0000; /* Dark red color */
    border: 2px solid #ff0000; /* Red border */
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.3s ease;
}

.play-again-button:hover {
    background-color: #ff0000; /* Bright red on hover */
    transform: scale(1.1); /* Slightly enlarge on hover */
}

.play-again-button:active {
    transform: scale(0.9); /* Slightly shrink on click */
}

/* Keyframes for animations */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}



      
        #player-info {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: none; /* Hidden by default */
            font-family: Arial, sans-serif;
            z-index: 1000;
        }
      
        #victoryOverlay {
          
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            font-size: 3rem;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index:10000;
        }
      
      
      
    </style>
  </head>
  <body>
<div id="victoryOverlay" style="display: none;">
    <div>YOU ESCAPED THE DUNGEON!</div>
  <div id="furinachan">
    <img src="https://cdn.stickers.gg/stickers/9689-furina.png" style="width: 55vw; height: auto; display: block; margin: 10px auto;"></div>
</div>

    
    <div id="deathScreen" class="death-screen">
    <div class="death-content">
        <h1 class="death-title">You Died</h1>
        <button id="playAgainButton" class="play-again-button">Play Again</button>
    </div>
</div>
    
    
    <div id = "combatStuff" style="display:none;">
    <!-- Health bar -->
    <div id="health-bar"> HP: ??? </div>

    <!-- Enemy section -->
    <section id="ENEMY">
      <!-- Enemy health bar -->
      <div id="enemy-health-bar"> HP: 100 </div>

      <!-- Enemy -->
     <div> <button id="enemy-test">
  <img src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/b7c57373-558e-4348-8cd0-b4fcc03a1fbb/dje6cbb-1777d636-026a-40c3-bb26-260434d5a640.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2I3YzU3MzczLTU1OGUtNDM0OC04Y2QwLWI0ZmNjMDNhMWZiYlwvZGplNmNiYi0xNzc3ZDYzNi0wMjZhLTQwYzMtYmIyNi0yNjA0MzRkNWE2NDAucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.AIvEFvhLgsSgDqbCoamiiB3vCiZ-iJDmKUEmnmGT_Uk" 
       alt="Enemy Image" id="enemy-image"> </button>
</div>
    </section>
  <div id="energy-bar"> Energy: 0 </div>
    <div id ="mana-bar"> Mana: ???</div>
    <!-- User bar -->
    <div id="user-bar">
      <button id="fight">Fight</button>
      <button id="item">Item</button>
    </div>
 <div>
        <button id="avatar">
            <img src="https://cdn.shopify.com/s/files/1/0747/5317/9944/files/furina_901c3b85-7c17-44c9-bcea-a7e434d864b5_600x600.jpg?v=1718073582" 
                 alt="Player Avatar" width="100" height="100">
        </button>
    </div>
    <!-- Fight menu -->
    <div id="fightMenu">
    <button id="attack1">Basic Attack</button>
    <button id="attack2">SKILLS</button>
    <button id="attack3">TALENTS</button>
    <button id="attack4">ULTIMATE!</button>
</div>

<!-- Submenu for Attack 2 -->
<div id="attack2-submenu" class="submenu">
    <button id="attack2-option1">Salon Solitaire</button>
    <button id="attack2-option2">Full Counter</button>
  <button id="attack2-option3">Magic Missile (Cost: 20 Mana)</button>
   <button id="attack2-option4">Zoltraak (Cost: 20 Mana)</button>
</div>

<!-- Submenu for Attack 3 -->
<div id="attack3-submenu" class="submenu">
    <button id="attack3-option1">Method Acting</button>
    <button id="attack3-option2">The River Widens (Cost: 20 Energy)</button>
  <button id="attack3-option3">Vendetta</button>
   <button id="attack3-option4">Swords Dance (Cost: 10 Mana)</button>
</div>

<!-- Submenu for Attack 4 -->
<div id="attack4-submenu" class="submenu">
    <button id="attack4-option1">Let the People Rejoice (Cost: 80 Energy)</button>
    <button id="attack4-option2">Musou no Hitotach (Cost: 55 Energy)</button>
    <button id="attack4-option3">Explosion! (Cost: 40 Mana & 40 Energy)</button>
</div>
    <div id="enemy-info" class="tooltip"></div>
      
      <div id"player-info"></div>
    
     <div id="itemMenu">
      <button id="healthpot">Healing Potion</button>
       <button id="manapot"> Mana Potion </button>
      <button id="pandoraBox">Pandora's Box</button>
      <button id="snakeoil">Snake Oil</button>
    </div>
    
    <div id="game-messages">
    <div id="message-log"></div>
</div>
    
    
   
    <!-- Top-right menu button -->
 <!-- Adventurer's Handbook button -->
    <button id="handbook-button">Adventurer's Handbook</button>

    <!-- Adventurer's Handbook menu -->
    <div id="handbook-menu">
      <button id="handbook-spells">Spells</button>
      <button id="handbook-items">Items</button>
      <button id="handbook-card">Adventurer Card</button>
    </div>

    <!-- Individual pages for spells and items -->
    <div id="spells-page" class="handbook-page">
      <h2>Spells</h2>
      <p><ul><li>Salon Solitaire: A hydro based spell with two modes depending on your alignment. Either summoning 3 little troop members who will coordinate their attacks with you. Or the damsel of the seas, who will heal you in return for energy. Your vitality is the key to their success! (Scales: HP  Element: HYDRO)</li><br>
      <li> Full Counter: You eagerly guard with your blade to let the enemy attack! Once attacked, you strike back with double the force with a fiery swing! (Scales: ATK  Element: PYRO)</li><br>
        <li>Magic Missile: A mage spell crafted to never miss! "A smart man will hit harder, a wise man will hit more!" (Scales: INT(dmg) WIS(amount)  Element:N/A)</li><br>
      <li>Zoltraak: A spell created by the demons to kill humans during the war with the demon king! Over the decades after the defeat of the demon king Zoltraak has been adapted by mankind. What used to be a death sentence is now survivable, for humans at least (Scales: INT(dmg)  Element:N/A)</li><br>
      <li>Method Acting: Your acting will please different crowds (changes stance for Salon Solitaire) (Scales: N/A  Element:N/A)</li> <br>
      <li>The River Widens: A ritual spell, which takes the caster's energy, and may actually return more energy than it took (Scales: N/A  Element: N/A)</li><br>
      <li> Vendetta: A ritual spell which makes the caster barbaric. The caster loses control, enemies retaliate in fear , but is seething with rage! (Scales: N/A  Element:N/A)</li><br>
       <li>Swords Dance: A spell which makes the user more stronger than ever before! (Scales: N/A  Element:N/A)</li><br>
      <li> Let the People Rejoice: By sacraficing the performer's energy, the crowd roars! The performer is delighted and is ready for another show. (restores HP and doubles attack) (Scales: N/A  Element: N/A)</li><br>
      <li> Musou no Hitotachi: A sword swing that cuts even the heavens, perfected by noone other than the Shogun of Inazuma (Scales:ATK   Element: Electro)</li><br>
      <li>Explosion: The most devestating spell to have ever been created! (Scales: INT(main) WIS(sub)  Element:PYRO)</li>
      </ul></p>
      <button id="close-spells">Close</button>
    </div>

    <div id="items-page" class="handbook-page">
      <h2>Items</h2>
      <p><ul><li>Health Potion: A concoction of chicken, sweet pea flowers, orange medicine mushrooms, and blue moon weed flowers which has a healing effect. (+35hp)</li><br>
        <li>Mana Potion: A concoction of blue glowing mushrooms, stardust, and primordial water. Drinking it will result in sickness if you don't move! (+25 Mana)</li><br>
      <li>Snake Oil: A vile with snake oil! Helps the drinker focus and relax their body (Dex +4) </li><br>
      <li>Pandora's Box: A strange box. It's contents unknown.</li>
      </ul></p>
      <button id="close-items">Close</button>
    </div>
  
   <div id="adventure-page" class="handbook-page">
      <h2>Adventurer's Card</h2>
      <p><ul><li>Name:Furina de Fontaine</li><br>
     <li>Class:Adventurer</li><br>
     <li>Age: 500  Gender: Female</li><br>
     <li>Country of Origin: Fontaine</li><br>
     <li>Eye Color: Heterochromia, blue, dark-blue</li><br>
     <li>Hair Color: White</li><br>
     <li>Address: 2128 Seastrike Street, Court of Fontaine</li><br>
     
      
      </ul>
     <h2> Stats </h2>
     <ul>
        <li>ATK: <span id="stat-atk">0</span></li>
        <li>DEF: <span id="stat-def">0</span></li>
       <li>DEX: <span id="stat-dex">0</span></li>
        <li>CON: <span id="stat-con">0</span></li>
        <li>INT: <span id="stat-int">0</span></li>
        <li>WIS: <span id="stat-wis">0</span></li>
        <li>Health: <span id="stat-health">0</span>/<span id="stat-health-max">0</span></li>
        <li>Mana: <span id="stat-mana">0</span>/<span id="stat-mana-max">0</span></li>
      </ul>
      </p>
      <button id="close-adventure">Close</button>
    </div>
  </div>


<div id="statstuff">
<h1>Stat Allocation</h1>
    <p>You have <span id="totalPoints">36</span> points left to allocate.</p>
    <p id="error"></p>

   <div class="stat">
    <label for="playerATK">ATK:</label>
    <input type="number" id="playerATK" min="0" max="15">
</div>
<div class="stat">
    <label for="playerDEF">DEF:</label>
    <input type="number" id="playerDEF" min="0" max="15">
</div>
<div class="stat">
    <label for="playerDEX">DEX:</label>
    <input type="number" id="playerDEX" min="0" max="15">
</div>
<div class="stat">
    <label for="playerCON">CON:</label>
    <input type="number" id="playerCON" min="0" max="15">
</div>
<div class="stat">
    <label for="playerINT">INT:</label>
    <input type="number" id="playerINT" min="0" max="15">
</div>
<div class="stat">
    <label for="playerWIS">WIS:</label>
    <input type="number" id="playerWIS" min="0" max="15">
</div>
<div>
    <span id="error" style="color: red;"></span>
</div>
<button onclick="allocateStats()">Allocate Stats</button>



<button id="startCombat" onclick="startCombat()">Start Combat</button>
  
 
 
    <script>
   const handbookButton = document.getElementById('handbook-button');
      const handbookMenu = document.getElementById('handbook-menu');
      const spellsPage = document.getElementById('spells-page');
      const itemsPage = document.getElementById('items-page');
      const closeSpells = document.getElementById('close-spells');
      const closeItems = document.getElementById('close-items');
      const adventurePage = document.getElementById('adventure-page');
      const closeAdventure = document.getElementById('close-adventure');

      handbookButton.addEventListener('click', () => {
        handbookMenu.style.display = 'flex';
      });

      document.getElementById('handbook-spells').addEventListener('click', () => {
        handbookMenu.style.display = 'none';
        spellsPage.style.display = 'block';
      });

      document.getElementById('handbook-items').addEventListener('click', () => {
        handbookMenu.style.display = 'none';
        itemsPage.style.display = 'block';
      });

      closeSpells.addEventListener('click', () => {
        spellsPage.style.display = 'none';
      });

      closeItems.addEventListener('click', () => {
        itemsPage.style.display = 'none';
      });
      
      document.getElementById('handbook-card').addEventListener('click', () => {
        handbookMenu.style.display = 'none';
        adventurePage.style.display = 'block';
      });
      closeAdventure.addEventListener('click', () => {
        adventurePage.style.display = 'none';
      });

      const totalPoints = 36;
let playerCHA = 1000000;
let remainingPoints = totalPoints;

const statInputs = document.querySelectorAll('.stat input');
const totalPointsDisplay = document.getElementById('totalPoints');
const errorDisplay = document.getElementById('error');

function updateRemainingPoints() {
    let usedPoints = 0;
    let isValid = true; // Flag to check if all stats are within the limit

    statInputs.forEach(input => {
        const value = parseInt(input.value) || 0;

        // Check if the stat exceeds the limit of 15 points
        if (value > 15) {
            isValid = false;
            input.value = 15; // Reset the value to the maximum allowed (15)
            alert('You cannot allocate more than 15 points to a single stat!');
        }

        usedPoints += value;
    });

    remainingPoints = totalPoints - usedPoints;
    totalPointsDisplay.textContent = remainingPoints;

    if (remainingPoints < 0) {
        errorDisplay.textContent = 'You have allocated more than 36 points!';
    } else if (!isValid) {
        errorDisplay.textContent = 'One or more stats exceed the limit of 15 points!';
    } else {
        errorDisplay.textContent = '';
    }
}

function allocateStats() {
    updateRemainingPoints();

    // Check if any stat exceeds the limit of 15 points
    let isValid = true;
    statInputs.forEach(input => {
        const value = parseInt(input.value) || 0;
        if (value > 15) {
            isValid = false;
        }
    });

    if (!isValid) {
        alert('One or more stats exceed the limit of 15 points. Please adjust your stats.');
        return;
    }

    if (remainingPoints < 0) {
        alert('You have allocated more than 40 points. Please adjust your stats.');
        return;
    }
    if (remainingPoints > 0) {
        alert('You still have points left to allocate.');
 
    }

    const playerATK = parseInt(document.getElementById('playerATK').value) || 0;
    const playerDEF = parseInt(document.getElementById('playerDEF').value) || 0;
    const playerDEX = parseInt(document.getElementById('playerDEX').value) || 0;
    const playerCON = parseInt(document.getElementById('playerCON').value) || 0;
    const playerINT = parseInt(document.getElementById('playerINT').value) || 0;
    const playerWIS = parseInt(document.getElementById('playerWIS').value) || 0;

    alert(`Stats allocated successfully!\nATK: ${playerATK}\nDEF: ${playerDEF}\nDEX: ${playerDEX}\nCON: ${playerCON}\nINT: ${playerINT}\nWIS: ${playerWIS}`);
}

statInputs.forEach(input => {
    input.addEventListener('input', updateRemainingPoints);
});
      

function initializePlayerStats() {
    playerATK = parseInt(document.getElementById('playerATK').value) || 0;
    playerDEF = parseInt(document.getElementById('playerDEF').value) || 0;
    playerDEX = parseInt(document.getElementById('playerDEX').value) || 0;
    playerCON = parseInt(document.getElementById('playerCON').value) || 0;
    playerINT = parseInt(document.getElementById('playerINT').value) || 0;
    playerWIS = parseInt(document.getElementById('playerWIS').value) || 0;

    playerHealthMax = 25 + playerCON * 15;
    playerHealth = playerHealthMax;
    playerManaMax = 10 + (playerINT * 7.5);
    playerMana = Math.floor(playerManaMax);
    playerEnergy = 0;
}
        
function startCombat() {
    allocateStats();
    
       document.getElementById("statstuff").style.display = "none";
      
      document.getElementById("combatStuff").style.display = "block";
      
      
      combat();
    
}





// Player death function
function playerDeath() {
    console.log('Player died! Showing death screen...');
    const deathScreen = document.getElementById('deathScreen');
    if (deathScreen) {
        deathScreen.style.display = 'flex';
    }
}

// Play Again button event listener
document.getElementById('playAgainButton').addEventListener('click', function () {
    const deathScreen = document.getElementById('deathScreen');
    if (deathScreen) {
        deathScreen.style.display = 'none';
    }

   
  const confirmReset = confirm('Are you sure you want to reset the game?');
    if (confirmReset) {
localStorage.clear();
    sessionStorage.clear();
        location.reload(true);}
});




   function updatePlayerStatsDisplay() {
  // Update basic stats
  document.getElementById('stat-atk').textContent = playerATK;
      document.getElementById('stat-dex').textContent = playerDEX;
  document.getElementById('stat-def').textContent = playerDEF;
  document.getElementById('stat-con').textContent = playerCON;
  document.getElementById('stat-int').textContent = playerINT;
  document.getElementById('stat-wis').textContent = playerWIS;
  
  // Update health and mana
  document.getElementById('stat-health').textContent = playerHealth;
  document.getElementById('stat-health-max').textContent = playerHealthMax;
  document.getElementById('stat-mana').textContent = playerMana;
  document.getElementById('stat-mana-max').textContent = playerManaMax;
}




function combat(){
      
  initializePlayerStats();
  
    const healthBar = document.getElementById("health-bar");
const avatar = document.getElementById("avatar");

function updateHealthBar() {
    let color;
    
    // Determine health bar color based on player health
    if (playerHealth <= 0) {
        color = 'black'; // When health is 0 or less, set color to black (dead state)
    } else if (playerHealth <= 20) {
        color = 'darkred'; // Critical state
    } else if (playerHealth <= 50) {
        color = 'red'; // Low health
    } else if (playerHealth <= 90) {
        color = 'orange'; // Medium health
    } else {
        color = 'blue'; // Full health (default blue color)
    }

    healthBar.style.backgroundColor = color;
    healthBar.innerText = `HP: ${playerHealth}`;

    // Change the avatar frame color based on health
    updateAvatarFrameColor();
}

// Function to change avatar frame color based on health
function updateAvatarFrameColor() {
    let frameColor;

    // Change avatar frame color based on player health
   if (playerHealth <= 0) {
        frameColor = 'black'; // When health is 0 or less, frame color black
    } else if (playerHealth <= 5) {
        frameColor = 'darkred'; // Extremely low health, frame very dark red
    } else if (playerHealth <= 10) {
        frameColor = 'firebrick'; // Very low health, frame brick red
    } else if (playerHealth <= 20) {
        frameColor = 'darkorange'; // Critical health, frame dark orange
    } else if (playerHealth <= 30) {
        frameColor = 'red'; // Low health, frame red
    } else if (playerHealth <= 40) {
        frameColor = 'tomato'; // Slightly more health, frame tomato red
    } else if (playerHealth <= 50) {
        frameColor = 'orangered'; // Health is low to medium, frame orange-red
    } else if (playerHealth <= 60) {
        frameColor = 'yellow'; // Medium health, frame yellow
    } else if (playerHealth <= 70) {
        frameColor = 'yellowgreen'; // Slightly above medium health, frame yellow-green
    } else if (playerHealth <= 80) {
        frameColor = 'limegreen'; // Above average health, frame lime green
    } else if (playerHealth <= 90) {
        frameColor = 'lightgreen'; // Good health, frame light green
    } else {
        frameColor = 'gold'; // Full health (default gold frame)
    }

    avatar.style.borderColor = frameColor;
    avatar.style.boxShadow = `0 4px 8px rgba(${getColorRGB(frameColor)}, 0.6)`; // Optional: glow effect based on health state
}
  
  
  
  

// Also call it after stat allocation

  
  //updates a bunch of ui repeatedly to make sure everything gets updated properly, just in case i forgot to call them somewhere
  setInterval(() => {
    updateManaDisplay();
    document.getElementById("mana-bar").textContent = `Mana: ${playerMana}`;
    updateEnergyDisplay();
    updateHealthBar();
    document.getElementById("health-bar").textContent = `HP: ${playerHealth}`;
    document.getElementById("enemy-health-bar").textContent = `HP: ${Math.max(0, enemyHp)}`;
     updatePlayerStatsDisplay();
    if(playerHealth <= 0)
    {
      playerDeath();
    }
}, 100); // Updates every 100 milliseconds

// Function to convert color names to RGB values for box-shadow effect
function getColorRGB(color) {
    const colors = {
        'black': '0, 0, 0',
        'darkred': '139, 0, 0',
        'red': '255, 0, 0',
        'orange': '255, 165, 0',
        'gold': '255, 215, 0'
    };
    return colors[color] || '255, 255, 255'; // Default to white if color is unknown
}

       const fightButton = document.getElementById('fight');
const itemButton = document.getElementById('item');
const fightMenu = document.getElementById('fightMenu');
const itemMenu = document.getElementById('itemMenu');

// Toggle the fight menu when the "Fight" button is clicked
fightButton.addEventListener('click', () => {
  // Hide the item menu if it's open
  itemMenu.style.display = 'none';
  // Toggle the visibility of the fight menu
  fightMenu.style.display = fightMenu.style.display === 'none' || fightMenu.style.display === '' ? 'flex' : 'none';
});

// Toggle the item menu when the "Item" button is clicked
itemButton.addEventListener('click', () => {
  // Hide the fight menu if it's open
  fightMenu.style.display = 'none';
  // Toggle the visibility of the item menu
  itemMenu.style.display = itemMenu.style.display === 'none' || itemMenu.style.display === '' ? 'flex' : 'none';
});

// Hide fight menu when an attack is chosen (only for buttons inside #fightMenu)
document.querySelectorAll("#fightMenu button").forEach((button) => {
  button.addEventListener("click", function () {
    fightMenu.style.display = "none";  // Hide the fight menu after an action
    addMessage(`You used ${button.textContent}!`);  // Show an addMessage message
    updateHealthBar();  // Update health bar after the attack
  });
});
  
  
  
  //player death 


      
     
      
       //test stats🍌🍌🍌🍌🍌🍌🍌
       let enemyHp = 100;
        let enemyAtk = 10;
        let enemyDef = 5;
        let enemyDex = 5;
      
      //enemy resistance
      //scaled out of 10, the higher the number to 10 the less damage reduction
   let enemyHasElectro = false;
let enemyHasHydro = false;
let enemyHasPyro = false;

    
      let EpyroRes = 5/10;
      let EhydroRes =   5/10;
      let EelectroRes = 5/10;
      
   
      
      //changes enenmy stats, for looped combat encounters


//enemy funny color generator!
  

      // Event listener for the Fight button
     


//end of enemy funny number generator!
      
    let rollEnemy = 2;

function enemyStatChanger() {
    rollEnemy = Math.floor(Math.random() * 10 + 1);
    let enemyImage = document.getElementById("enemy-image");

  
  
  if(finalBoss === true){
    enemyHp = 777;
    enemyAtk = 25;
    enemyDef = 20;
    enemyDex = 10;
    
    enemyImage.src ="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/b7c57373-558e-4348-8cd0-b4fcc03a1fbb/djfswqn-1c2f8d23-f296-4a19-9a74-04f7326eb620.png/v1/fit/w_406,h_558/chuck_norris_for_ap_comp_sci_project_by_apcompsci3rdperiod_djfswqn-375w-2x.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NTU4IiwicGF0aCI6IlwvZlwvYjdjNTczNzMtNTU4ZS00MzQ4LThjZDAtYjRmY2MwM2ExZmJiXC9kamZzd3FuLTFjMmY4ZDIzLWYyOTYtNGExOS05YTc0LTA0ZjczMjZlYjYyMC5wbmciLCJ3aWR0aCI6Ijw9NDA2In1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.doX6OLrraGmw0xVo7YuDpW2lI2oz6rAi1rJn5VQJT1c";
    
    addMessage("CHUCK NORRIS HAS ARRIVED!")
    return;
  }
  
   if (rollEnemy < 7) {
        enemyHp = Math.floor(Math.random() * 90 + 65);
        enemyAtk = Math.floor(Math.random() * 15 + 4);
        enemyDef = Math.floor(Math.random() * 6 + 2);
        enemyDex = Math.floor(Math.random() * 8 + 2);
        
        EpyroRes = (Math.floor(Math.random() * 15) + 1) / 10;
        EhydroRes = (Math.floor(Math.random() * 15) + 1) / 10;
        EelectroRes = (Math.floor(Math.random() * 15) + 1) / 10;

        enemyImage.src = "https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/b7c57373-558e-4348-8cd0-b4fcc03a1fbb/dje6cbb-1777d636-026a-40c3-bb26-260434d5a640.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2I3YzU3MzczLTU1OGUtNDM0OC04Y2QwLWI0ZmNjMDNhMWZiYlwvZGplNmNiYi0xNzc3ZDYzNi0wMjZhLTQwYzMtYmIyNi0yNjA0MzRkNWE2NDAucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.AIvEFvhLgsSgDqbCoamiiB3vCiZ-iJDmKUEmnmGT_Uk";
        
        document.getElementById("enemy-health-bar").textContent = `HP: ${enemyHp}`;
        addMessage(`New Normal enemy appears! HP: ${enemyHp}, ATK: ${enemyAtk}, DEF: ${enemyDef}, DEX: ${enemyDex}`);
    } 
    else if (rollEnemy >= 7 && rollEnemy <= 9) {
        enemyHp = Math.floor(Math.random() * 120 + 75);
        enemyAtk = Math.floor(Math.random() * 20 + 9);
        enemyDef = Math.floor(Math.random() * 9 + 4);
        enemyDex = Math.floor(Math.random() * 10 + 4);

        EpyroRes = (Math.floor(Math.random() * 15) + 1) / 10;
        EhydroRes = (Math.floor(Math.random() * 15) + 1) / 10;
        EelectroRes = (Math.floor(Math.random() * 15) + 1) / 10;

        enemyImage.src = "https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/b7c57373-558e-4348-8cd0-b4fcc03a1fbb/djfqb1q-de22ff0d-37ce-40d5-8d1a-0d5d8cc06d57.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2I3YzU3MzczLTU1OGUtNDM0OC04Y2QwLWI0ZmNjMDNhMWZiYlwvZGpmcWIxcS1kZTIyZmYwZC0zN2NlLTQwZDUtOGQxYS0wZDVkOGNjMDZkNTcucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.twSIk16gKBNOVQmlR6wDl-2AMp6N63G2N5v7SMwIlAY";
        
        document.getElementById("enemy-health-bar").textContent = `HP: ${enemyHp}`;
        addMessage(`New Elite enemy appears! HP: ${enemyHp}, ATK: ${enemyAtk}, DEF: ${enemyDef}, DEX: ${enemyDex}`);
    } 
    else {
        enemyHp = Math.floor(Math.random() * 195)+110;
        enemyAtk = Math.floor(Math.random() * 25)+14;
        enemyDef = Math.floor(Math.random() * 10 + 6);
        enemyDex = Math.floor(Math.random() * 12 + 6);

        EpyroRes = (Math.floor(Math.random() * 15) + 1) / 10;
        EhydroRes = (Math.floor(Math.random() * 15) + 1) / 10;
        EelectroRes = (Math.floor(Math.random() * 15) + 1) / 10;

        enemyImage.src = "https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/b7c57373-558e-4348-8cd0-b4fcc03a1fbb/djfqhun-fd182feb-2da4-4f78-b3ea-9af2ed9cf51a.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2I3YzU3MzczLTU1OGUtNDM0OC04Y2QwLWI0ZmNjMDNhMWZiYlwvZGpmcWh1bi1mZDE4MmZlYi0yZGE0LTRmNzgtYjNlYS05YWYyZWQ5Y2Y1MWEucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.3w1ZGl3kYNVmKDyPb4fF_awlNHdzzvJwaYXvIIKR6aA";
        
        document.getElementById("enemy-health-bar").textContent = `HP: ${enemyHp}`;
        addMessage(`New Pseudo-boss enemy appears! HP: ${enemyHp}, ATK: ${enemyAtk}, DEF: ${enemyDef}, DEX: ${enemyDex}`);
    }
}


      
      //ENEMY AI AREA
      
   let damageTaken = 0;
let dodge = Math.floor(playerDEX / 2.5);

function enemyAI() {
    if (finalBoss === true) {
        let ChuckMove = Math.random(); // Random number between 0-1

        if (ChuckMove < 0.5) {
            // Life Drain Attack
            let lifeDrainATK = Math.floor(Math.random() * enemyAtk) + 20;
            damageTaken = lifeDrainATK - (Math.floor(Math.random() * playerDEF) + 2);
            damageTaken = Math.max(0, damageTaken);
            playerHealth -= damageTaken;
            enemyHp += Math.floor(damageTaken * 0.75); // Heals for 75% of damage dealt
            addMessage(`Chuck sucked your life force! You took ${damageTaken} damage, and it restored ${Math.floor(damageTaken * 0.75)} HP!`);
        } else {
            // Multi-Attack (Hits 8 times)
            for (let i = 0; i < 8; i++) { 
                let multiATK = Math.floor(Math.random() * (enemyAtk / 4)) + 1;
                let multiDamage = multiATK - (Math.floor(Math.random() * playerDEF) + 1);
                multiDamage = Math.max(0, multiDamage);
                playerHealth -= multiDamage;
                addMessage(`The Final Boss attacked! You took ${multiDamage} damage!`);
            }
        }

        // Ensure no further attacks occur
        updateHealthBar();
        if (playerHealth <= 0) {
            addMessage("You have been defeated!");
            playerHealth = 0;
            document.getElementById("health-bar").textContent = `HP: 0`;
            playerDeath();
        }
        return; // EXIT FUNCTION IMMEDIATELY
    }

    // Normal enemy attack logic (won't execute if finalBoss === true)
    if (enemyHp > 0) {
        let enemyHIT = Math.floor(Math.random() * 20) + enemyDex + counterHITrateINC - dodge;

        if (enemyHIT >= 10) {
            if (rollEnemy < 7) {
                // Normal Enemy - Standard Attack
                let enemyNormalATK = Math.floor(Math.random() * enemyAtk) + 7;
                damageTaken = enemyNormalATK - (Math.floor(Math.random() * playerDEF) + 1);
                damageTaken = Math.max(0, damageTaken);
                playerHealth -= damageTaken;
                addMessage(`The enemy attacked! You took ${damageTaken} damage!`);
            } else if (rollEnemy >= 7 && rollEnemy <= 9) {
                // Elite Enemy - Life Drain Attack
                let lifeDrainATK = Math.floor(Math.random() * enemyAtk) + 10;
                damageTaken = lifeDrainATK - (Math.floor(Math.random() * playerDEF) + 2);
                damageTaken = Math.max(0, damageTaken);
                playerHealth -= damageTaken;
                enemyHp += Math.floor(damageTaken / 2); // Heals for 50% of damage dealt
                addMessage(`The Elite enemy used Life Drain! You took ${damageTaken} damage, and it restored ${Math.floor(damageTaken / 2)} HP!`);
            } else {
                // Pseudo-Boss - 50% chance to use Life Drain OR Multi-Attack
                let pseudoBossMove = Math.random();

                if (pseudoBossMove < 0.5) {
                    let lifeDrainATK = Math.floor(Math.random() * enemyAtk) + 12;
                    damageTaken = lifeDrainATK - (Math.floor(Math.random() * playerDEF) + 2);
                    damageTaken = Math.max(0, damageTaken);
                    playerHealth -= damageTaken;
                    enemyHp += Math.floor(damageTaken / 2); // Heals for 50% of damage dealt
                    addMessage(`The Pseudo-Boss used Life Drain! You took ${damageTaken} damage, and it restored ${Math.floor(damageTaken / 2)} HP!`);
                } else {
                    for (let i = 0; i < 2; i++) {
                        let multiATK = Math.floor(Math.random() * enemyAtk) + 6;
                        let multiDamage = multiATK - (Math.floor(Math.random() * playerDEF) + 1);
                        multiDamage = Math.max(0, multiDamage);
                        playerHealth -= multiDamage;
                        addMessage(`The Pseudo-Boss attacked! You took ${multiDamage} damage!`);
                    }
                }
            }

            document.getElementById("health-bar").textContent = `HP: ${playerHealth}`;
            updateHealthBar();
        } else {
            addMessage(`YOU DODGED!`);
        }

        if (playerHealth <= 0) {
            addMessage("You have been defeated!");
            playerHealth = 0;
            document.getElementById("health-bar").textContent = `HP: 0`;
            playerDeath();
        }
    } else {
        addMessage(`The enemy is eliminated`);
        newEnemy();
    }

    if (usedSnakeOil === true) {
        playerDEX -= 4;
        usedSnakeOil = false;
    }
}

      
      
      
      //END OF ENEMY AI AREA
      

//
      
      
//item bag area
let healthPotionCount = 10;
function healthPotion(){
 if (healthPotionCount > 0 && playerHealth < playerHealthMax) {
  playerHealth = Math.min(playerHealth + 35, playerHealthMax); // Ensure player health doesn't exceed max
  healthPotionCount--;
  document.getElementById("health-bar").textContent = `HP: ${playerHealth}`;
  updateHealthBar();
  addMessage('You drank a health potion');
  enemyAI();
} else if(healthPotionCount<=0){
  addMessage('You have ran out of potions.')
}else{
  addMessage('It would be wasteful to drink one right now');
}

}
let manaDestruction = 0;
let STOREplayerINT = 0;
let manaPotionCount = 10;
let manaSickness = false;

function manaPotion() {
    STOREplayerINT = playerINT;

    if (manaPotionCount > 0) {
        if (manaSickness) {
            mageSickness();
            manaDestruction++;
        }

        console.log(`manaDestruction: ${manaDestruction}`); // Debug log

        manaPotionCount--;
        playerMana += 25;
        document.getElementById("mana-bar").textContent = `Mana: ${playerMana}`;
        addMessage("You drank a mana potion");

        // Mana destruction messages
        switch (manaDestruction) {
            case 1:
                addMessage("Furina feels uneasy...");
                break;
            case 2:
                addMessage("Furina's veins glow blue! She begins to throw up...");
                break;
            case 3:
                addMessage("Blue liquid flows out of Furina's eyes...");
                break;
            case 4:
                addMessage("Furina starts to convulse.. The ground begins to crack wildly...");
                break;
            case 5:
                addMessage("Furina's mana was too high for her to handle! She explodes violently!");
                playerHealth -= 100000;
                enemyHp -= 10000000;
                return; // Stops function execution after explosion
        }

        manaSickness = true;
        enemyAI();
    } else {
        addMessage("You are out of mana potions!");
    }
}



let snakeOilCount = 10;
let usedSnakeOil = false;
function snakeOil(){
  if(snakeOilCount > 0){
    playerDEX +=4;
    snakeOilCount--;
    usedSnakeOil = true;
    addMessage('You feel ALIVE!');
      enemyAI();
  } else{
    addMessage('Your bottles have run dry');
  }

}

let pandorasBoxCount = 1;
function pandorasBox() {
  if (pandorasBoxCount > 0) {
    let pandoraEvent = Math.floor(Math.random() * 10 + 1);
    pandorasBoxCount--;
    addMessage('You have opened the box!');

    switch (pandoraEvent) {
      case 1: {
        playerHealthMax = 200;
        playerHealth += 50;
        addMessage('You have been healed!');
        break;
      }
      case 2: {
        playerHealth = 1;
        addMessage('You have been left at the brink of death');
        break;
      }
      case 3: {
        playerEnergy += 105;
        playerATK += 10;
        addMessage('You are full of energy');
        updateEnergyDisplay();
        break;
      }
      case 4: {
        playerEnergy -= 100;
        playerATK -= 5;
        addMessage('You are out of energy');
        break;
      }
      case 5: {
        addMessage('You fall asleep');
        for (let i = 0; i < 5; i++) {
          enemyAI();
        }
        break;
      }
      case 6: {
        addMessage('Loot llama');
        snakeOilCount += 10;
        healthPotionCount += 10;
        break;
      }
      case 7: {
        addMessage('Your enemy is motivated');
        enemyHp = 500;
        enemyAtk = 25;
        enemyDef = 10;
        document.getElementById("enemy-health-bar").textContent = `HP: ${enemyHp}`;
        break;
      }
      case 8: {
        addMessage('You are filled with rage');
        rageActivated = true;
        break;
      }
      case 9: {
        addMessage('You begin to bleed profusely');
        playerBleeding();
        break;
      }
      case 10: {
        addMessage('The box is empty');
        break;
      }
      default: {
        addMessage("Someone disapproves");
        break;
      }
    }
  }
  else{
    addMessage("You stare at the opened box");
  }
  enemyAI();
}


document.getElementById("healthpot").addEventListener("click", healthPotion);
  document.getElementById("manapot").addEventListener("click", manaPotion);
document.getElementById("snakeoil").addEventListener("click", snakeOil);
document.getElementById("pandoraBox").addEventListener("click", pandorasBox);
//end of items

//item effects
  let storeATK = playerATK;
let rageActivated = false;
function rage(){
  playerATK += 1;
  playerHealthMax += 5;
  playerDEX += 4;
  enemyDef -= 1;
}

let playerBleed = false;
function playerBleeding(){
  playerHealth -= Math.floor(Math.random()*5+1);
}
  
function mageSickness(){
 if(manaSickness = true){
  if(playerINT > 4){
    playerINT -= 4;
  }else{
    playerINT = 0;
  }
   addMessage("You feel sick to your stomach! You can't think straight");
 } 
}


// end of item effects

//function for energy and mana display
      function updateEnergyDisplay() {
    document.getElementById("energy-bar").textContent = `Energy: ${playerEnergy}`;
}
      
  
     function updateManaDisplay(){
      document.getElementById("mana-bar").textContent = `Mana: ${playerMana}`;
     }
      //end of energy display function
      
      //slash effect
  
  

// Function to display the slashing effect
function showSlashEffect() {
    // Create an image element for the GIF
    const slashEffect = document.createElement('img');
    slashEffect.id = 'slash-effect';
    slashEffect.src = 'https://ugokawaii.com/wp-content/uploads/2022/08/flash-effect.gif'; // URL of the GIF
    slashEffect.alt = 'Slash Effect';

    // Append the GIF to the enemy container
    const enemyContainer = document.getElementById('ENEMY');
    enemyContainer.appendChild(slashEffect);

    // Remove the GIF after a short delay (e.g., 500ms)
    setTimeout(() => {
        slashEffect.remove();
    }, 500); // Adjust the delay to match the GIF's duration
}
  
  //effect end
      
      
      
      //BASIC ATTACK AREA
      
      
    
      let turnCount = 0; // Tracks turns
 

function basicAttack() {
  
  if (rageActivated === true){
    rage();
  }
  
  if (playerBleed = true){
    playerBleeding();
  }
  
  if(manaSickness){
    manaSickness = false;
    addMessage("You no longer feel sick!");
    playerINT = STOREplayerINT;
  }
  
  if(manaDestruction>0){
    manaDestruction--;
  }else{
    manaDestruction = 0;
  }
    let normalAttack = Math.floor(Math.random() * playerATK) + 5;

  
    let damageDealt = Math.max(0, normalAttack - enemyDef);
  let hit = Math.floor(Math.random()* 20) + playerDEX;
  
  if(hit >= 8){
    enemyHp -= damageDealt;
     flashEnemyButton();
    showSlashEffect();
   
    

    document.getElementById("enemy-health-bar").textContent = `HP: ${Math.max(0, enemyHp)}`;
    addMessage(`You used Basic Attack! It dealt ${damageDealt} damage!`);
      playerEnergy += Math.floor(7 + playerWIS/3);
    updateEnergyDisplay();
    
    
  }
  else{
    addMessage('You missed lmfao');
  }
  

    // Proper Salon Solitaire activation check
   if (salonSolitaireTurns > 0) {
    salonSolitaireTurns--;
    if (salonSolitaireTurns > 0 && salonSolitaireTurns % 2 === 0) { 
        salonSolitaire(false);
    }
    if (salonSolitaireTurns === 0) {
        addMessage("Salon Solitaire has expired!");
    }
}

    turnCount++;

    if (enemyHp <= 0) {
        addMessage("You defeated the enemy!");
        enemyHp = 0;
        document.getElementById("enemy-health-bar").textContent = `HP: 0`;
        newEnemy();
    } else {
        enemyAI();
    }
  updateManaDisplay();
}

document.getElementById("attack1").addEventListener("click", basicAttack);
      
      
      
      //end of basic attack area
      
      
      
      
      
      //start of attack 2 area
     
      let stance = "ousia";
      let salonSolitaireTurns = 0;

function salonSolitaire(triggerEnemyAI = true) {
    if (salonSolitaireTurns > 0 && triggerEnemyAI) {
        addMessage("Salon Solitaire is already active!");
        return;
    }
    salonSolitaireTurns = 4;

    if (stance === "ousia") {
        let attackStanceDMG = Math.round((Math.random() * playerHealthMax / 5) + 9);
        let totalDamage = 0;

        for (let i = 0; i < 3; i++) {
            let SSdamageDealt = Math.max(0, attackStanceDMG - enemyDef);
            let hit = Math.floor(Math.random() * 20) + playerDEX;

            if (hit >= 12) {
                // Apply Hydro status if not already applied
                if (!enemyHasHydro) {
                    enemyHasHydro = true;
                    addMessage('Hydro applied to the enemy!');
                }
                 
                // Calculate Hydro damage
                let hydroDamage = SSdamageDealt * EhydroRes; // Factor in Hydro resistance
                hydroDamage = Math.floor(hydroDamage); // Round down the damage

                // Handle reactions
                if (enemyHasPyro) {
                    // Vaporize reaction: Hydro + Pyro = 1.5x damage
                    hydroDamage *= 1.5;
                    addMessage('Vaporize reaction! Hydro damage is increased!');
                  enemyHasPyro = false;
                  enemyHasHydro = false;
                } else if (enemyHasElectro) {
                    // Electro-Charged reaction: Hydro + Electro = DoT
                    hydroDamage *= 1.2; // Slight damage boost
                  enemyHasElectro = false;
                  enemyHasHydro = false;
                    addMessage('Electro-Charged reaction! Enemy takes additional damage over time!');
                    // Apply a DoT effect (optional)
                    setTimeout(() => {
                        enemyHp -= Math.floor(hydroDamage * 0.5); // Additional damage after a delay
                        document.getElementById("enemy-health-bar").textContent = `HP: ${Math.max(0, enemyHp)}`;
                        addMessage('Electro-Charged effect! Enemy takes additional damage!');
                    }, 2000); // 2-second delay
                }
                playerHealth -= Math.floor(playerHealth/15);
              addMessage('A part of you breaks off...');
                // Apply damage to the enemy
                enemyHp -= hydroDamage;
               flashEnemyButton();
                totalDamage += hydroDamage;
            } else {
                addMessage('Your troop missed!');
            }
        }

        // Update UI
        updateHealthBar();
        document.getElementById("enemy-health-bar").textContent = `HP: ${Math.max(0, enemyHp)}`;
        addMessage(`Your troop attacked! They dealt a total of ${totalDamage} Hydro damage!`);

        playerHealth = Math.max(0, playerHealth);
        document.getElementById("health-bar").textContent = `HP: ${playerHealth}`;

        playerEnergy += 3;
        updateEnergyDisplay();
    } else if (stance === "pneumia") {
        let healingStanceHEAL = Math.round(playerHealthMax / 3.5 + 5);
        playerHealth += healingStanceHEAL;
        playerHealth = Math.min(playerHealthMax, playerHealth);
        document.getElementById("health-bar").textContent = `HP: ${playerHealth}`;
        addMessage(`You have been healed for ${healingStanceHEAL} HP!`);
      if(playerEnergy>0){
        playerEnergy -= 8;}
      else{
        playerEnergy = 0;
      }
        updateEnergyDisplay();
    }

    if (triggerEnemyAI) {
        enemyAI();
    }
}

      let counterHITrateINC = 0;
   function fullCounter() {
    addMessage('You hold your blade firm!');
    counterHITrateINC = 100;

    // Increase defense before enemy attacks
    playerDEF += 3;

    // Enemy attacks
    enemyAI();

    // Calculate damage taken
    let enemyNormalATK = Math.floor(Math.random() * enemyAtk) + 7;
    let damageTaken = enemyNormalATK - (Math.floor(Math.random() * playerDEF) + 1);
    damageTaken = Math.max(0, damageTaken); // Prevent negative damage

    addMessage('You counterattack with a fiery strike!');

    // Calculate counter damage (Pyro damage)
    let counterDamage = (damageTaken * (playerATK*0.75)) * EpyroRes; 
    counterDamage = Math.floor(counterDamage); 

 
    if (!enemyHasPyro) {
        enemyHasPyro = true;
        addMessage('Pyro applied to the enemy!');
    }


    if (enemyHasHydro) {
        // Vaporize reaction: Pyro + Hydro = 1.5x damage
        counterDamage *= 1.5;
        addMessage('Vaporize reaction! Pyro damage is increased!');
      enemyHasPyro = false;
                  enemyHasHydro = false;
    } else if (enemyHasElectro) {
       
        counterDamage *= 1.2; // Slight damage boost
        enemyDef = Math.max(0, enemyDef - 2); // Reduce enemy defense
        addMessage('Overloaded reaction! Enemy defenses are weakened!');
      enemyHasPyro = false;
                  enemyHasElectro = false;
    }

    // Apply damage to the enemy
    enemyHp -= counterDamage;
       flashEnemyButton();
    enemyHp = Math.max(0, enemyHp); // Ensure HP doesn't go below 0

    // Update UI
    document.getElementById("enemy-health-bar").innerText = `HP: ${Math.max(0, enemyHp)}`;
    addMessage(`You retaliate with a fiery strike for ${counterDamage} Pyro damage!`);

    // Reset defense and counter hit rate
    playerDEF -= 3;
    addMessage('Your grip loosens');
     playerEnergy += 5;
    counterHITrateINC = 0;
}
      
  function magicMissileHitEffect() {
    let enemyImage = document.getElementById("enemy-image");
    let originalImage = enemyImage.src;
    let hitEffectGif = "https://i.gifer.com/origin/18/1841ee5f002ce72ea3db1177531c04a4_w200.gif"; // Your GIF

    enemyImage.src = hitEffectGif;

    setTimeout(() => {
        enemyImage.src = originalImage; // Revert to the original enemy image after 500ms
    }, 500);
}    
  
  function magicMissile(){
      if(manaSickness){ 
      mageSickness();
      }
      if(playerMana>=20)
      {
       playerMana -= 20;
        updateManaDisplay();
        for(let i = 0; i<(playerWIS/2) + 1;i++)
        {
          magicMissileDamage = playerINT;
          enemyHp -= Math.floor(magicMissileDamage*0.75) - Math.floor(enemyDef/2);
         addMessage(`Your bolt strikes for ${Math.floor(magicMissileDamage*0.75) - Math.floor(enemyDef/2)}`);
          flashEnemyButton();
            document.getElementById("enemy-health-bar").textContent = `HP: ${Math.max(0, enemyHp)}`;
        }
        enemyAI();
      }
      else
      {
        addMessage(`Your mana reserves run low `);
      }
    }
  
  let zoltraakDMG = 0;
  function Zoltraak(){
     if(manaSickness){ 
      mageSickness();
      }
    if(playerMana>=20)
    {
    playerMana -= 20;
      updateManaDisplay();
      zoltraakDMG = Math.floor(Math.random()*(playerINT*6) + 25);
      let hit = Math.floor(Math.random() * 20) + playerDEX/5;
      
      if(hit>=20)
      {
      addMessage(`Your Zoltraak Has Hit A Critical Spot `);
        zoltraakDMG *= 4;
        enemyHp -= zoltraakDMG;
          addMessage(`It strikes for ${Math.floor(zoltraakDMG)}`);
          flashEnemyButton();
         document.getElementById("enemy-health-bar").textContent = `HP: ${Math.max(0, enemyHp)}`;
      }
      else if(hit>=7)
      {
      addMessage(`The Zoltraak remains undefended `);
         enemyHp -= zoltraakDMG;
          addMessage(`It strikes for ${Math.floor(zoltraakDMG)}`);
          flashEnemyButton();
         document.getElementById("enemy-health-bar").textContent = `HP: ${Math.max(0, enemyHp)}`;
      }
      else
      {
          addMessage(`Zoltraak Missed! `);
      }
      
      playerEnergy += Math.floor(playerINT/4) + playerWIS;
      enemyAI();
    }
    else{
      addMessage('You do not have enough mana to cast Zoltraak!');
    }
  }

      
      
      //end of attack 2 area
      
      
      
      //start of attack 3 area
      
      
      function methodActing() {
    if (stance === "ousia") {
        stance = "pneumia";  // Corrected assignment
    } else {
        stance = "ousia";
    }
    enemyAI();

    addMessage(`You have changed your alignment to ${stance}`);
}
      
      
        function theRiverWidens() {
    addMessage("You decide to roll the dice!");
    
    if (playerEnergy <= 20) {
        addMessage("Not enough energy to roll the dice!");
        return;
    }

    playerEnergy -= 20;
    let energyGained = Math.floor(Math.random() * 120) + 1;
    playerEnergy = Math.min(playerEnergy + energyGained, 200); // Assuming max energy is 200

    addMessage(`You gained ${energyGained} energy! Current energy: ${playerEnergy}`);
    updateEnergyDisplay();
     
     enemyAI();
}

let storeplayerATK = 0;
function vendettaState() {
  storeplayerATK = playerATK;
  playerATK += 5;
  addMessage('Your anger finally peaks! You become unstoppable');
  rageActivated = true;

  let i = 0;
  function attackSequence() {
    if (i < 6) {
      basicAttack();
      flashEnemyButton();
          playerEnergy+=2;
      playerATK += 3;
      enemyAI();
      i++;
      setTimeout(attackSequence, 500); // Adjust the delay (500ms) as needed
    } else {
      playerATK = storeplayerATK; // Restore playerATK after the loop
    }
  }
  
  attackSequence();
  // Start the delayed loop
}
      
  
  function swordsDance()
  {
  if(playerMana >= 10)
  {
    playerMana -= 10;
      updateManaDisplay();
  playerINT += 2;
    playerATK += 4;
    playerWIS += 0.5;
     addMessage(`Those who provoke the blade, will suffer its string (Your INT, WIS, AND ATK have been increased)`);
    enemyAI();
  }  
    else{
      addMessage(`Insufficient Mana`);
    }
  }


      
     
 
      
      
      
      //end of attack 3 area
      
      
      
      
      //start of ult attacks/attack 4
  
      
      //default ultimate
      function letThePeopleRejoice(){
        if(playerEnergy >= 80){
          playerEnergy -= 80;
          updateEnergyDisplay();
          playerHealth = playerHealthMax;
          playerATK = playerATK*1.75
          playerMana += Math.floor(playerManaMax/3);
           document.getElementById("health-bar").textContent = `HP: ${playerHealth}`;
        addMessage("You used 'Let the People Rejoice'! Your HP is fully restored, your mana is restored and your attack power increased!");
           enemyAI();
        }
        else {
        addMessage("Not enough energy to use this skill!");
    }
}
      
      
      //Musou No Hitotachi
      
     function hitotachi() {
    if (playerEnergy >= 55) {
        playerEnergy -= 55;
        updateEnergyDisplay();
        playerATK += playerATK * 2;

        let hit = Math.floor(Math.random() * 20) + playerDEX + playerATK;

        if (hit >= 8) {
            if (!enemyHasElectro) {
                enemyHasElectro = true;  // Apply Electro if not present
                addMessage("Electro applied to the enemy!");
            }

            if (enemyHasHydro) {
                let damage = (enemyHp / 2) + playerATK * 2;
                while (hit >= 8 && damage > 1) {
                    enemyHp -= Math.floor(damage);
                    document.getElementById("enemy-health-bar").textContent = `HP: ${Math.max(0, enemyHp)}`;
                    addMessage(`Electro-Charged! You dealt ${Math.floor(damage)} damage!`);
                    damage /= 4;
                    hit = Math.floor(Math.random() * 20) + playerDEX + playerATK; // Roll again
                    flashEnemyButton();
                }
            } else if (enemyHasPyro) {
                enemyHp -= (enemyHp / 2) + playerATK * 2;
                enemyDef = 0;  // Destroy defenses for 4 turns
                flashEnemyButton();
                addMessage("Overloaded reaction! Enemy defenses shattered");
              enemyHasPyro = false;
              
            } else {
                enemyDef /= 2;
                enemyHp -= (enemyHp / 2) + playerATK * 2;
                addMessage("The God of Eternity blesses your strike, you did BIG PP damage!");
              enemyHasHydro = false;
                flashEnemyButton();

            }

            document.getElementById("enemy-health-bar").textContent = `HP: ${Math.max(0, enemyHp)}`;
        }
      if (enemyHp <= 0) {
        addMessage("You defeated the enemy!");
        enemyHp = 0;
        document.getElementById("enemy-health-bar").textContent = `HP: 0`;
        newEnemy();
    }
      else {
            addMessage("The God of Eternity ignored your call");
        }

        playerATK -= playerATK * 2;
    }
}
      
  
  
  //EXPLOSION
  let explosionDMG = 0;
  function EXPLOSION()
  {
    if(manaSickness){ 
      mageSickness();
      }
   if (playerEnergy>=40 && playerMana>=40)
   {
     playerEnergy -= 40;
     playerMana = 0; //COSTS ALL THE MANA TO CAST
     updateManaDisplay();
      addMessage("You begin to channel your strongest spell");
     addMessage("Turn skipped!");
     enemyAI();
     if(!enemyHasPyro){
       enemyHasPyro = true;
       addMessage("the enemy has been afflicted with pyro")
     }
     for(let i = 0; i < playerINT/2; i++)
     {
     explosionDMG = Math.floor(Math.random()*(40*playerINT) + 5*playerWIS);
       
       if(enemyHasHydro)
     {
       addMessage("VAPORIZE!");
       enemyHp -= explosionDMG*2;
       addMessage(`THE AIR WAS DETONATED FOR ${explosionDMG*2.0} DAMAGE`);
     }
     else if(enemyHasElectro)
     {
       addMessage("Overload!");
       enemyDef = 0;
       enemyHp -= explosionDMG*1.5;
        addMessage(`THE ELECTRIFIED AIR WAS DETONATED FOR ${explosionDMG*1.5} DAMAGE`);
     }
       else{
          enemyHp -= explosionDMG;
        addMessage(`THE AIR WAS DETONATED FOR ${explosionDMG} DAMAGE`);
       }
       if (enemyHp <= 0) {
        addMessage("You defeated the enemy!");
        enemyHp = 0;
        document.getElementById("enemy-health-bar").textContent = `HP: 0`;
        newEnemy();
    }
     }
     document.getElementById("enemy-health-bar").textContent = `HP: ${Math.max(0, enemyHp)}`;
       updateManaDisplay();
     for(let i = 0; i < 3; i++){
       addMessage("You are exhausted!")
     
       enemyAI();
     }
     
   }
    else
    {
    addMessage("Unable to cast!");  
    }
  }
      
      
      
      // document.getElementById("attack4").addEventListener("click", letThePeopleRejoice);
      

      
     
      
      
      //end of ult area
      
      //playerDeath
      
   
      
      

      // Close fight menu when "Item" button is clicked
      itemButton.addEventListener("click", function () {
        fightMenu.style.display = "none";
      });
      
     let defeatedEnemies = 0; // Counter for enemies defeated
const maxEnemies = 12; // Total enemy encounters
  let finalBoss = false;
let enemiesLeft = maxEnemies;
  
function newEnemy() {
    if (defeatedEnemies < maxEnemies - 1) {
        defeatedEnemies++;
        enemiesLeft--;

        addMessage(`Enemy ${defeatedEnemies} defeated! A new enemy appears! ${enemiesLeft} enemies remain!`);

        enemyStatChanger(); // Respawn new enemy with updated stats

        // Reset enemy health display
        document.getElementById("enemy-health-bar").textContent = `HP: ${Math.max(0, enemyHp)}`;
    } else if (defeatedEnemies === 11) {  // Fixed final boss spawn condition
        defeatedEnemies++;
        finalBoss = true;
        addMessage("The final boss is arriving!");
        enemyStatChanger(); // Now properly spawns the final boss
    } else {
        addMessage("You've won the battle!");
        playerVictory();
    }
}
  
 function playerVictory() {
    document.getElementById("victoryOverlay").style.display = "block";
}
      
        const enemyButton = document.getElementById("enemy-test");
  const enemyInfoBox = document.getElementById("enemy-info");

  enemyButton.addEventListener("click", function (event) {
      // Update enemy stats display
      enemyInfoBox.innerHTML = `
        <strong>Enemy Stats:</strong><br>
        HP: ${enemyHp}<br>
        ATK: ${enemyAtk}<br>
        DEF: ${enemyDef}<br>
         DEX: ${enemyDex}<br>
        PyroRES: ${EpyroRes*10}<br>
        HydroRes: ${EhydroRes*10}<br>
        ElectroRes: ${EelectroRes*10}<br>
      `;

      // Position the tooltip near the enemy
      enemyInfoBox.style.top = `${event.clientY}px`;
      enemyInfoBox.style.left = `${event.clientX + 20}px`;
      enemyInfoBox.style.visibility = "visible";
      enemyInfoBox.style.opacity = "1";
  });

  // Hide the tooltip when clicking anywhere else
  document.addEventListener("click", function (event) {
      if (!enemyButton.contains(event.target)) {
          enemyInfoBox.style.visibility = "hidden";
          enemyInfoBox.style.opacity = "0";
      }
  });


//fight menu sub menus
// Function to show a submenu
function showSubmenu(submenuId) {
    // Hide all submenus first
    document.querySelectorAll('.submenu').forEach(submenu => {
        submenu.style.display = 'none';
    });

    // Show the selected submenu
    const submenu = document.getElementById(submenuId);
    if (submenu) {
        submenu.style.display = 'block';
    }
}

// Function to hide all submenus
function hideSubmenus() {
    document.querySelectorAll('.submenu').forEach(submenu => {
        submenu.style.display = 'none';
    });
}

// Event listeners for attack buttons
document.getElementById("attack2").addEventListener("click", () => {
    showSubmenu("attack2-submenu");
});

document.getElementById("attack3").addEventListener("click", () => {
    showSubmenu("attack3-submenu");
});

document.getElementById("attack4").addEventListener("click", () => {
    showSubmenu("attack4-submenu");
});

// Event listeners for submenu options
document.getElementById("attack2-option1").addEventListener("click", () => {
    hideSubmenus();
    salonSolitaire(true); // Current function
});

document.getElementById("attack2-option2").addEventListener("click", () => {
    hideSubmenus();
    fullCounter(); // Alternative function
});
  
  document.getElementById("attack2-option3").addEventListener("click", () => {
    hideSubmenus();
    magicMissile(); // Alternative function
});
  
  
   document.getElementById("attack2-option4").addEventListener("click", () => {
    hideSubmenus();
    Zoltraak(); // Alternative function
});


document.getElementById("attack3-option1").addEventListener("click", () => {
    hideSubmenus();
    methodActing(); // Current function
});

document.getElementById("attack3-option2").addEventListener("click", () => {
    hideSubmenus();
    theRiverWidens(); // Alternative function
});
document.getElementById("attack3-option3").addEventListener("click", () => {
    hideSubmenus();
    vendettaState(); // Alternative function
});
  document.getElementById("attack3-option4").addEventListener("click", () => {
    hideSubmenus();
    swordsDance(); // Alternative function
});

document.getElementById("attack4-option1").addEventListener("click", () => {
    hideSubmenus();
    letThePeopleRejoice(); // Current function
});

document.getElementById("attack4-option2").addEventListener("click", () => {
    hideSubmenus();
    hitotachi(); // Alternative function
});
  
  
  document.getElementById("attack4-option3").addEventListener("click", () => {
    hideSubmenus();
    EXPLOSION(); // Alternative function
});

// Hide submenus when clicking outside
document.addEventListener("click", (event) => {
    if (!event.target.closest('.submenu') && !event.target.closest('#attack2, #attack3, #attack4')) {
        hideSubmenus();
    }
});

function addMessage(message) {
    const messageLog = document.getElementById("message-log");
    const messageElement = document.createElement("p");
    messageElement.textContent = message;
    messageLog.appendChild(messageElement);

    // Scroll to the bottom of the message log
    messageLog.scrollTop = messageLog.scrollHeight;
}



function flashEnemyButton() {
    // Add the flash-red class to the enemy button
    enemyButton.classList.add("flash-red");

    // Remove the flash-red class after the animation is complete (0.5s)
    setTimeout(() => {
        enemyButton.classList.remove("flash-red");
    }, 500); // Matches the duration of the animation
}
  }
  
  
    </script>
  </body>
</html>
